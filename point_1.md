# 模拟考试卷1

## 选择题        

1、嵌入式系统是以应用为中心，以计算机技术为基础，软硬件可裁剪、适应应用系统对功能、可靠性、成本、体积、功耗严格要求得专用计算机系统。巨型计算机实际上是一个巨大的计算机系统。
2、嵌入式系统cpu范围极其广阔，从最初的4位处理器，到目前仍在大规模应用的8位单片机，和现在最新的受到广泛青睐的32位、64位嵌入式cpu，都属于嵌入式系统cpu范围。
3、微控制器（MCU）将整个计算机硬件的大部甚至全部电路集成在一块芯片中，智能仪器仪表、家用电器、计算机网络及通信方面得到了广泛应用，8位的目前仍在大规模应用。
4、片上系统（SoC）芯片可以分为通用SoC芯片和专用SoC芯片两大类。通用的SoC芯片中可以只有一个CPU（或DSP），称为单核SoC，也可以包含多个CPU（或DSP），称为多核SoC。专用SoC可分为定制的嵌入式处理芯片和现场可编程式处理芯片两类。FPGA芯片可以反复地编程、擦除、使用，在较短使劲按内可完成电路地输入、编译、优化、仿真、直至芯片地制作。
5、数码相机是嵌入式系统地典型应用之一，它由前端和后端两部分组成，前端负责数字图像获取，后端负责数字图像的处理，后端通常是以嵌入式DSP作为核心的SoC芯片，DSP用于完成数字图像处理；此外，数码相机中还有一个超低功耗的8位MCU，负责进行操作控制；高端数码相机配置有实时操作系统和图像处理软件。
6、一个汉字占两个字节，128*1024/2=65536。
7、MPEG-2制定与1994年，设计目标是高级工业标准的图像质量立即更高的传输率。MPEG-2所能提供的传输率在3-10Mbit/sec间，其在NTSC制式下的分辨率可达720*486，MPEG-2的音频编码可提供左右中及两个环绕声道，和多达7个伴音声道（DVD可有8种语言配音的原因）。由于MPEG-2在设计时的巧妙处理，使得大多数MPEG-2解码器也可播放MPEG-1格式的数据，如VCD。同时，由于MPEG-2的出色性能表现，已能适用于HDTV，使得原打算为HDTV设计的MPEG-3还没出世就被抛弃了。（MPEG-3要求传输速率在20Mbits/sec-40Mbits/sec间，但这将使画面有轻度扭曲）。除了做为DVD的指定标准外，MPEG-2还可用于为广播，有限电视网，电缆网络以及卫星直播提供广播级的数字视频。
8、IP地址分为A类、B类、C类三个基本类。C类IP地址范围：192.0.0.1到223.255.255.254。第1字节、第2字节和第3字节为网络地址，第4字节为主机地址。C类网络地址数量最多，适用于小规模的局域网络，每个网络最多只能包含254台计算机。
9、嵌入式处理器的体系结构按指令集可分为两大类：CISC和RISC；按存储机制分为冯诺依曼结构及哈佛结构；按字长分为8位、16位、32位和64位。
10、ARM内核与其他处理器内核相比，主要特点为耗电省、功能强、成本低、16位Thumb与32位Thumb-2双指令集并存以及具有非常众多的合作伙伴，适用面广泛。ARM有许多系列，如ARM7，ARM9，ARM10E，XScale，Cortex等，其中哈佛结构和冯诺依曼结构都有。如控制领域最常用的ARM7系列使冯诺依曼结构，而Cortex-M3系列是哈佛结构。
11、ARM公司在经典处理器ARM11以后的产品改用Cortex命名，并分成A、R和M三类，旨在为各种不同的市场提供服务。Cortex系列属于ARMv7架构，这是到2010年为止ARM公司最新推出的指令集架构。（2011年，ARMv8架构在在TechCon上推出）ARMv7架构定义了三大分工明确的系列：“A”系列面向尖端的基于虚拟内存的操作系统和用户应用；“R”系列针对实时系统；“M”系列对微控制器。
12、在ARM的体系结构中，处理器可以工作在3种不同的状态，①ARM状态②Thumb状态及Thumb-2状态③调试状态。除支持Thumb-2的ARM处理器外，其他所有ARM处理器都可以工作在ARM状态。ARM状态时ARM处理器工作于32位指令的状态，所有指令均为32位宽度。
13、CPSR（当前程序状态寄存器）在任何处理器模式下被访问。它包含了条件标志位、中断禁止位、当前处理器模式标志以及其他的一些控制和状态位。
14、所谓的大端模式，是指数据的高位，保存在内存的低地址中，而数据的低位，保存在内存的高地址中，这样的存储模式有点儿类似于把数据当作字符串顺序处理：地址由小向大增加，而数据从高位往低位存放。
15、8位数据变32位可以通过数字左移完成。
16、LDR是存储器到寄存器的数据传送指令，#是立即数符号，题中是基址加变址寻址，表示［R5+2］→R2，执行过后，R5的值为R5+2。
17、采用基址加变址寻址方式，字节数据存储指令用STRB。
18、汇编中使用逻辑或指令和1进行或运算可以达到让寄存器中的指定位置位的作用。
19、前向通道通常指的是输入接口，由模拟量输入接口和数字量输入接口组成，模拟输入接口包括传感器，信号调节电路（滤波，放大器等），A/D转换器等构成。后向通道是输出接口，由模拟量和数字量接口组成，包括D/A转换器，功率放大器，执行器等。
20、大多数嵌入式处理器内置了时钟信号发生器，因此时钟电路只需要外接一个石英晶体振荡器和两只电容就可以工作了，但有些场合（如为了减少功耗、需要严格同步等）需要使用外部振荡源提供时钟信号。
21、AMBA 是ARM公司公布的总线协议，用于连接和管理片上系统 (SoC) 中功能模块的开放标准和片上互连规范。标准规定了ARM处理器内核与处理器内部高带宽RAM、DMA以及高带宽外部存储器等快速组件的接口标准，也规定了内核与ARM处理器内部外围端口及慢速设备接口组件的接口标准。AMBA有多个版本，性能随版本的发展而逐步提高。
22、系统总线通过桥接器与外围总线互连，外围总线连接的硬件组件包括：GPIO、UART、SPI、I2C、USB设备ADC、DAC等等。DMA（Direct Memory Access）控制器是一种在系统内部转移数据的独特外设，可以将其视为一种能够通过一组专用总线将内部和外部存储器与每个具有DMA能力的外设连接起来的控制器。
23、ARM芯片内部有多个定时计数组件，主要包括看门狗定时器（WDT）、Timer通用定时器、RTC、脉冲宽度调制器（PWM）。而ADC是模数转换控制器。
24、RM芯片内部有多个可互联通信的组件，主要包括UART、I2C、SPI、CAN、USB、Ethernet等。
25、嵌入式系统的存储器以半导体存储器为主。使用的RAM有SRAM、DRAM等多种，随着技术不断发展，FRAM和MRAM等新型存储器不断出现，也得到使用；NOR Flash和NAND Flash是现在市场上两种主要的闪存技术；在性能高的嵌入式处理器中都会集成内部Cache，ARM9和ARM11都有Cache存储器。
26、串行外设（SPI）接口是一种同步串行外设接口，允许嵌入式处理器与各种外围设备以串行方式进行通信、数据交换。一般使用4跳线：SCK、MISO、MOSI和SSEL；采用SPI可以构成“一主一从式”、 “一主多从式”、 “多主多从式”和“互为主从式”系统。
27、USB接口提供了内置电源，主机的USB接口向从设备提供电源；USB总线接口支持设备的即插即用和热插拔功能，USB 2.0采用半双工差分方式传送信息，目前USB2.0的速度为480Mb/s，USB3.0达到5Gb/s即640MB/s。
28、LED为共阴极接法，要显示数字5，则a、f、g、e、d是高，段码应该是01101101，0X6D。
29、IEEE的实时UNIX分委会认为实时操作系统应该具备7个特征：具有异步I/O和中断处理能力；任务切换时间和中断延迟时间确定；优先级中断和调度；抢占式调度；内存锁定；连续文件；同步。
30、一般按照对外部事件的响应时间快慢，将嵌入式操作系统分成强实时型和普通实时型。强实时嵌入式操作系统有VxWorks，pSOS，μC/OS-II。
31、单内核结构是传统操作系统采用的结构，也称为宏内核（Macro Kernel）。其缺点是占内存空间大，缺乏可扩展性，维护困难，任务执行时间的可预测性较低，可靠性较低，排除故障和增加新功能需要重编译。其优点是应用程序生成效率高，系统花在内核功能切换上的开销非常小，对外来事件反应速度快，操作系统内核的运行效率高。
32、U-Boot以POCBoot和ARMBoot 计划为基础。除了支持Power PC系列处理器外，还支持X86、ARM、Mips、Alpha、IA64、SupcrHSPARC等多种常用体系结构处理器。
33、μC/OS-II是抢占式实时操作系统内核，只能管理64个任务。目前的版本保留8个任务给系统，这样用户编写的应用程序最多可以有56个任务。不支持时间片轮转调度法，因此赋给每一个任务的优先级是不相同的。每个任务拥有自用栈。
34、在μC/OS-II中有多种方法可以保护任务之间的共享数据和提供任务之间的通信。其中主要有以下三种：利用宏OS_ENTER_CRITICAL()和OS_EXIT_CRITICAL()来关闭中断和打开中断；利用函数OSSchedLock()和OSSchedUnlock()对任务调度函数上锁和开锁；利用信号量、互斥信号量、邮箱和消息队列进行任务间通信。利用内存文件进行任务间的大规模数据共享是达不到保护任务之间的共享数据的作用。
35、移植μC/OS-II到一个嵌入式电路板上正常运行，必须满足以下要求：处理器的C编译器能产生可重入代码；用C语言就可以打开和关闭中断；处理器支持中断，并且能产生定时中断（通常在10~100Hz之间）；处理器支持能够容纳一定量数据（可能是几千字节）的硬件栈区；处理器有将栈区指针和其他CPU寄存器读出和存储到栈区或内存中的指令。存储管理单元可以不需要。
36、HAL系统库提供以下服务：结合Newlib ANSI C标准库，向用户提供熟知的标准库函数；提供设备驱动，使用户可以访问系统中的所有设备；为用户提供了与HAL服务相统一的标准接口（HAL  API），例如数据访问、中断处理和报警设施；系统初始化，在main（）函数之前完成软核处理器Nios和运行库环境的初始化任务；设备初始化，在main（）函数之前完成每个设备的实例化和初始化。
37、IOS的前身是UNIX-BSD。
38、微内核操作系统是对单内核做了结构改进后推出的，内核小巧，传统操作系统内核中的许多部分都被移出内核，采取服务器方式实现；接口一致，所有进程请求使用统一接口，进程不区分内核模式和用户模式服务；各个功能模块之间松散耦合，只完成服务功能，系统管理功能交给一个或多个特权服务程序；微内核功能扩充方便，但是各个功能之间的切换而引起的开销比较大。
39、由于程序调试时不占用目标机的资源，因此目标机的初始启动程序调试、硬件接口的调试，一般都采用JTAG。至于裸机状态的目标机当然更需要采用JTAG调试方式了。
40、嵌入式系统的应用形式是多种多样的，不同的嵌入式应用系统，需要选择适合其应用需求的开发工具来进行开发。采用开发工具的主要目的是提高开发质量，缩短开发周期，降低开发成本。
## 填空题       

41、IP核的分类。按照IC设计文件的类型，IP核通常分为三种：软核、固核和硬核。
42、当前数码相机中用于存储相片的大多是闪存卡，即Flash存储器；65536色的图像是16位的，所以数据量=1024×1024×16/8=2MB，压缩比为4，所以80张所占存储容量为80×2/4=40MB。
43、WLAN所采用的主要通信协议是802.11；数据传输速率可达到11 Mbps、54Mbps、108Mbps甚至更高。
44、经典ARM处理器有7种异常：主要包括复位RESET、未定义指令UND、软件中断SWI、指令预取中止PABT、数据访问中止DABT、外部中断请求IRQ以及快速中断，其中优先级最高的异常是复位。
45、Cortex嵌入式处理器包括主要应用于控制领域的Cortex-M系列和面向实时应用领域的Cortex-R系列。
46、开关中断指令属于程序状态类指令，用于更改处理器状态。关外部中断使用的指令为：CPSID I，开外部中断的指令为：CPSIE I。
47、AND R0,R1,R2是将R1与R2按位相与的结果存在R0中，故结果为0x12000018；运算之后R1保持不变。
48、当调用子程序时，子程序调用指令为BL；子程序返回调用程序的指令为MOV PC,LR。
49、按照AMBA总线规范，基于ARM内核的嵌入式处理器芯片采用系统总线与外围总线两层结构的方式构建片上系统。其中的系统总线主要用于连接高带宽快速组件。
50、嵌入式系统的存储器以半导体存储器为主，FRAM和MRAM，分别称为铁电随机存取存储器和磁性随机存取存储器。
51、存储器的容量取决于存储单元的个数和存储器各单元的位数，而单元个数与存储器的地址总线有密切关系，因此存储器芯片的容量完全取决于存储器芯片的地址线条数和数据线的位数。
52、I2C总线被启动后，多个主机在每发送一个数据位时都要对SDA信号线电平进行检测，只要检测的电平与自己发出的电平相同就会继续占用总线。总线的控制遵循“低电平优先”的原则。
53、UART由发送器、接收器、控制单元及波特率发生器等构成。
54、嵌入式系统与通用计算机系统软件的相同之处，指的是嵌入式系统通常也具备引导加载程序，外设驱动程序，操作系统，文件系统，网络协议栈，图形用户界面，数据库，以及各种各样的应用程序等。
55、基于操作系统的外围工具软件运行在嵌入式系统上，往往具有内部结构精简，代码轻量化 ，占用存储资源少的特点。
56、实时系统的任务时限有两种：截止时间，也就是任务开始执行时间到任务必须完成的时间间隔。任务执行预设时间，或者叫做任务最快完成时间，这是无中断响应情况下的任务最快执行时间。
57、实时系统对时间约束要求的严格性，使可预测性成为实时系统的一项重要性能要求，它是指RTOS能够对外部事件的响应时间和实时任务的执行时间进行判断，以确定被事件触发的实时任务能否在规定的时间内完成。
58、实时系统按响应时间一般分成三类：强实时系统，其响应时间一般在毫秒级或微秒级；普通实时系统，其响应时间一般在秒级；弱实时系统，其响应时间一般在数十秒级。
59、一般嵌入式系统的开发过程，通常分为：需求分析与规格说明、系统设计、构件设计、系统集成与测试等4个阶段。
60、以S3C2410为核心的目标机，在Linux操作系统下开发该目标机的Linux应用程序，通常使用arm-linux-gcc交叉编译器来编译应用程序。若要对一个应用程序进行调试排错，则应该在编译命令中加g参数对它进行编译。
## 综合题        
 
61、本题是一道基于S3C2410的嵌入式系统开发综合题。考查了数字图像的存储容量计算，网络通信数据传输；系统硬件构件设计，尤其是GPIO接口功能及初始化程序，结合常用外设的连接，如LED、键盘等；基于μC/OS-II操作系统的应用程序的主要μC/OS-II函数，如何创建任务及启动任务调度功能。
存储一幅指纹图像的原始像素信息需要的存储容量为：320×240/1000 = 76.8 KB；一幅指纹图像的传输时间为：115.2Kbps换算成字节是每秒发送115.2/8 = 14.4 KB的数据；异步串行每发送8个字节有一个起始位和停止位，76.8/8 = 9.6，说明一共需要10个停止位和10个起始位，发送一个96.8KB的数据，96.8/14.4 = 6.72秒；采用10Mbps的以太网传输，一幅指纹图像的传输时间为：10Mbps理论速度是每秒1.25MB，加上损耗以1Mbyte每秒计算，理论时间是0.076秒。
片选信号CS低电平有效； nGCS2映射地址为0x10000000。
00为输入，01为输出。则初始化GPC0、GPC1引脚为输出功能的语句是：rGPCCON=((rGPCCON|0x00000005)&0xFFFFFFF5)；红色LED指示灯的驱动电路由GPIO的GPC0引脚控制，绿色LED指示灯的驱动电路由GPC1引脚控制。GPC0、GPC1引脚各自输出“0”时，其对应的LED灯灭，各自输出“1”时，其对应的LED灯亮。则绿色LED灯点亮为：rGPCDAT = rGPCDAT |0x0002；绿色LED灯熄灭为：rGPCDAT = rGPCDAT &0xFFFD；红色LED灯点亮为：rGPCDAT = rGPCDAT |0x0001；红色LED灯熄灭为：rGPCDAT = rGPCDAT &0xFFFE。
I2C总线只有两条信号线，一条是数据线SDA，另一条是时钟线SCL，所有操作都通过这两条信号线完成。rGPECON=((rGPECON|0xA0000000)&0xAFFFFFFF); 初始化I2C功能引脚。
初始化GPD0~GPD2为输入：rGPDCON= rGPDCON &0xFFFFFFC0；00为输入，01为输出。初始化GPE0~GPE3为输出：rGPECON= ((rGPECON &0xFFFFFF00)|0x00000055)；程序循环8次；用来判断GPD0~GPD2引脚是否有输入信号。若返回值为0xFFFF表示键盘中无键按下；若返回值为0xFBFD表示键盘中第3行第2列的键被按下。
OSTaskCreate() 函数用来创建任务； 函数OSStart()启动多任务调度功能；一旦OSStart() 函数开始执行，就标志着μC/OS-II进入了多任务调度的正常运行状态。

