# point_3  

## 选择题 

1、与人们日常使用的个人计算机相比，嵌入式系统具有许多不同的特点：①专用型，嵌入式系统与具体应用紧密结合，具有很强的专用型；②隐蔽性，嵌入式系统通常总是非计算机设备（系统）中的一个部分，它们隐藏在其内部，不为人知；③资源受限，嵌入式系统通常要求小型化、轻量化、低功耗及低成本，因此其软硬件资源受到严格的限制；④高可靠性；⑤实时性；⑥软件固化。                 
2、嵌入式系统中的CPU一般具有4个特点：①支持实时处理；②低功耗；③结构可扩展；④集成了测试电路。            
3、随着电子设计自动化水平的提高和VLSI制造技术的飞速发展，半导体加工已经从微米、亚微米进入到深亚微米的时代，单个芯片上可以集成几亿个甚至几十亿个晶体管，因而能够把计算机或其他一些电子系统的全部电路都集成在单个芯片上，这种芯片就是所谓的片上系统。SoC芯片中既包含数字电路，也可以包含模拟电路，甚至还能包含数字/模拟混合电路和射频电路。由于SoC将嵌入式系统的几乎全部功能都集成在一块芯片中，单个芯片就能实现数据的采集、转换、存储、处理和I/O等多种功能。目前，大多数32位的嵌入式处理芯片均为SoC，SoC逐渐成为集成电路设计的主流发展趋势。                        
4、目前计算机中使用最广泛的西文字符集及其编码是ASCII字符集和ASCII码，即美国标准信息交换码。基本的ASCII字符集共有128个字符，包括96个可打印字符和32个控制字符，每个字符使用7个二进制位进行编码。我国目前广泛使用的汉字编码国家标准有GB2312和GB18030。GB2312国标字符集中包含3755个一级常用汉字和3008个二级常用汉字，此外还有682个图形符号（包括拉丁字母、俄文、日文平假名与片假名、希腊字母、汉语拼音等）。这些汉字和图形符号在计算机内部都采用2字节（16个二进制位）来表示。               
5、集成电路根据其集成度的高低，即单个集成电路所含电子元件（如晶体管、电阻、电容等）的数目可以分为小规模（SSI）、中规模（MSI）、大规模（LSI）、超大规模（VLSI）和极大规模（ULSI）等几种。集成电路的制造大约需要几百道工序，工艺复杂且技术难度非常高，许多工序必须在恒温、恒湿、超洁净的无尘厂房内完成，生产、控制及测试设备异常昂贵。嵌入式处理芯片大多属于VLSI和ULSI。               
6、图像数据量的计算公式如下：图像数据量=图像水平分辨率×图像垂直分辨率×像素深度/8。由此可知，此题中的数码相机一张照片大小为1024×1024×16/8=2M，所以需要使用的存储器容量为2M×80/4=40M。             
7、音频信息数字化的过程是取样、量化、编码。           
8、关于IP协议，目前大量使用的还是IPv4。          
9、RISC的英文全称是Reduced Instruction Set Computer，中文是精简指令集计算机；哈佛结构是一种将程序指令存储和数据存储分开的存储器结构，是一种并行体系结构；ARM处理器本身是32位设计，但也配备16位指令集，其中，ARM指令为32位的长度，Thumb指令为16位长度。            
10、ARM处理器有多种工作模式，其中用户模式(USER)是ARM处理器正常的程序执行状态；系统模式(SYS)是运行具有特权的操作系统任务；快中断模式(FIQ)支持高速数据传输或通道处理；管理模式(SVC)即操作系统保护模式。除此之外还有数据访问终止模式（ABT）、中断模式（IRQ）、未定义指令终止模式（UND）。          
11、ARM处理器的CPSR寄存器是程序状态寄存器，包含条件码标志，中断禁止位，当前处理器模式以及其他状态和控制信息。          
12、ARM有七种异常类型：复位异常、数据访问中止异常、快速中断请求异常（FIQ）、一般中断请求（IRQ）、预取指令异常、软件中断异常、未定义异常。每个异常中断向量占据4个字节，不同类型的异常中断其中断服务程序入口地址不同，其中复位异常级别最高。        
13、大端模式，是指数据的高位保存在内存的低地址中，而数据的低位保存在内存的高地址中；小端模式，是指数据的高位保存在内存的高地址中，而数据的低位保存在内存的低地址中；ARM处理器支持Thumb（16位）/ARM（32位）双指令集，能很好的兼容8位/16位器件；MPU为ARM处理器的内存保护单元，MMU是ARM处理器的内存管理单元。               
14、此处ARM处理器命名主要是ARM内核命名。在ARM Cortex之前，ARM内核的命名中T表示支持高密度16位的Thumb指令集；ARM11以后则以Cortex命名，分为三个系列，-A，-R，-M系列，分别面向高端应用、实时控制和微控制器。其中ARM Cortex-M内部没有MMU。                
15、ADD和ADC分别表示加操作和带进位加操作，而AND表示逻辑与操作，NE和EQ分别表示不相等和相等的判断。             
16、寄存器间接寻址就是以寄存器中的值作为操作数地址，而操作数本身存放在存储器中。用于间接寻址的寄存器必须用［］括起来。               
17、DCD为ARM汇编器所支持的数据定义伪指令，用于分配一片连续的字存储单元并用指定的数据初始化，A项正确；CODE16伪指令通知编译器，其后的指令序列为16位的Thumb指令，故B正确；EQU是等于伪指令，用于为程序中的常量、标号等定义一个等效的字符名称，Test EQU 50定义标号Test的值为50，C错误；IMPORT伪指令用于通知编译器要使用的标号在其他源文件中定义，但要在当前源文件中引用，而且无论当前源文件是否引用该标号，该标号均会被加入到当前源文件的符号表中，D项解释正确，故本题选择C。           
18、ARM汇编分支程序采用转移指令B、子程序调用指令BL或条件转移指令BX来实现；在ARM汇编中一般没有专门的指令用来实现循环，一般采用比较指令CMP、ADD或SUB等能产生条件的指令，然后再通过带状态的条件转移指令BX来实现。          
19、嵌入式最小硬件系统一般包括嵌入式处理器、时钟电路、电源电路、复位电路、存储器和调试测试接口。          
20、在嵌入式系统中，对于CPU使用最频繁的少量的程序代码和数据用SRAM作为高速缓冲存储器（Cache）存放，系统正在运行中的程序的大部分数据和代码存放在主存储器（内存）中，尚未启动运行的其余程序或数据则存放在容量大的外部存储器如磁盘中待命。使用Cache的优点是只需要增加少许成本，就能使整个系统的性能得到显著提高。               
21、DDR是Dual Data Rate的缩写，指双倍数据速率；DDR2使原来DDR可预读取2位变成可预读取4位（或8位），把DDR的数据传输速率又提高了两倍（四倍）；磁性随机存取存储器MRAM是一种非易失性存储器，拥有SRAM的高速存取能力，以及DRAM的高集成度；铁电存储器FRAM既具有只读存储器非易失性的特点，又具有随机存储器可快速随机读写的特点，而且速度快，功耗低。               
22、将数据写到SPI发送缓冲区后，一个时钟信号SCK对应一位数据的发送（MISO）和另一位数据的接收（MOSI）；在主机中数据从移位寄存器中自左向右发出送到从机（MOSI），同时从机中的数据自右向左发到主机（MISO），经过8个时钟周期完成1字节的发送。      
23、USB OTG的作用是可以摆脱主机，直接在具有OTG的USB总线上完成点对点通信，实现在没有主机的情况下从设备之间直接进行数据传送，故A正确；目前USB2.0的速度为480Mb/s，USB3.0达到5Gb/s即640MB/s，故B项错误；USB接口提供了内置电源，主机的USB接口向从设备提供电源，C正确；USB总线接口支持设备的即插即用和热插拔功能，所以D也正确。故本题选择B。           
24、目前的触摸屏有两种形式，一种是电阻式触摸屏（俗称软屏），另一种是电容式触摸屏（俗称硬屏）。电阻式触摸屏是一种电阻传感器，它将矩形区域中触摸点(X,Y)的物理位置转换为代表X坐标和Y坐标的电压，基本原理是利用压力感应进行控制，结构简单，价格低；而电容式触摸屏结构复杂，价格高，带多点触摸或滑动操作的触摸屏均属于电容式。        
25、LCD显示屏自身不带控制器，没有驱动电路，仅仅是显示器件（屏），价格最低；LCD显示模块内置了LCD显示屏、控制器和驱动模块，这类显示模块有字符型、有图形点阵型等。PC机通常使用的是LCD显示器，除具备显示屏外还包括驱动器、控制器以及外壳等，是完整的LCD显示设备，其接口也有相应的标准，主要包括VGA、DVI两种主要形式，现在又开始流行HDMI接口。              
26、S3C2410是三星公司基于ARM920T核的两款嵌入式微处理器，属于中高档32位嵌入式微处理器；内部具有分离的16KB大小的指令Cache和16KB大小的数据Cache；使用ARM公司特有的AMBA总线，对于高速组件采用AHB总线，而对于低速外设接口则采用APB总线，AHB通过桥接器链接APB；芯片内部集成了许多硬件组件，包括了内部SRAM、外部存储器控制器等等。            
27、实时时钟（RTC）组件是一种能提供日历/时钟等功能的内置硬件。S3C2410的RTC具有的主要功能包括BCD数据、闰年产生器、告警功能、独立的电源端口、支持毫秒滴答时钟中断作为RTOS核的滴答时钟、循环复位功能等。实时时钟模块RTC采用单独的供电引脚和单独的时钟源；实时时钟控制寄存器RTCCON共4位，控制时钟计数复位、BCD计数、时钟选择以及确定是否允许RTC读/写等；RTC内部的数据寄存器都是8位寄存器，存放相应的BCD码值。    
28、嵌入式处理器至少有一个UART接口，采用标准的电平转换电路可以构成RS-232接口和RS-485接口；RS-232无法消除共模干扰，且通信距离只有15m左右，RS-485采用差分信号传输方式，因此具有很强的抗共模干扰能力，传输距离可以达到1200m，通常用于主从式多机通信系统，主机可采用轮询方式与各从机建立通信连接。       
29、实时系统的主要特征是能够及时响应外部发生的随机任务请求，并且能够在规定的时限内完成任务。典型的实时系统有民航导航系统、防空预警系统、电力输送控制系统等；典型的非实时系统有视频播放系统、博客发布系统、手机交互式城市交通导航系统等。        
30、实时操作系统（RTOS）是一种专门服务于实时系统应用请求的操作系统。它的实时性能指标主要根据三个指标来衡量：响应时间、吞吐量和生存时间。        
31、μC/OS-II具有良好的可裁剪性和可移植性，能够支持的任务数最多为64。          
32、嵌入式操作系统按照内核结构可以分为单内核操作系统跟微内核操作系统；属于微内核结构的典型嵌入式操作系统有Symbian、VxWorks、QNX、μC/OS-II、iOS等。         
33、移植VxWorks操作系统有下列四种操作类型：宿主机移植、体系结构移植、目标板移植和升级以前Tornado集成开发环境版本的BSP到最新版本。         
34、RTOS的特点是响应中断请求并且完成相应中断服务子程序（ISR）的时间非常快。四个选项中，VxWorks、RTAl和RTLinux均是实时操作系统。          
35、硬件抽象层（HAL）最早由微软公司在研发Windows NT操作系统时提出，在嵌入式领域，硬件抽象层主要用来简化嵌入式操作系统的移植作业，其定义与微软公司在Windows NT 开发时的实现目标基本一致，指的是嵌入式软件中直接访问底层硬件的例程集合。在嵌入式系统软件结构中增加的HAL位于硬件电路板和操作系统内核之间，它是嵌入式硬件电路板的最基本软件，HAL的函数是移植操作系统的基础。          
36、Bootloader的stage1的基本步骤（按执行先后顺序列出）为：基本硬件初始化，为加载stage2准备RAM空间，拷贝stage2的执行代码到RAM空间中，设置栈区指针SP，跳转到stage2的C程序入口点。         
37、单内核结构是传统操作系统采用的结构，也成为宏内核（Macro Kernel）。Unix、嵌入式Linux、WinCE、Mac OS、Android OS和DOS操作系统都是典型的单内核操作系统。     
38、Linux内核主要由5个子系统组成，进程调度（SCHED），内存管理（MM），虚拟文件系统（VFS），网络接口（NET），进程间通信（IPC）。           
39、嵌入式应用产品的产品生命周期短，上市时间紧，功耗限制严，开发环境变化大，因此嵌入式系统的开发有些不用于通用计算机应用开发，主要有以下特点：①使用宿主机—目标机的开发架构②与底层硬件控制程序的关系密切③软硬件资源受限制④需要固化程序。       
40、嵌入式系统开发中，要想准确地定位软件和硬件中出现的错误，必须借助多种硬件和软件开发调试工具，调试工具的任务是控制程序代码的执行并使系统中看不见的信息称为可视。不同复杂程度的嵌入式系统使用的调试工具不完全相同，主要有在线仿真器，JATG适配器，驻留监控软件，指令模拟器。           
## 填空题

41、硬件的主体是中央处理器和存储器，他们通过I/O接口和I/O设备与外部世界联系，并借助总线相互连接。中央处理器（CPU）由运算器、控制器、寄存器、高速缓冲存储器（Cache）等部件组成，故A是中央处理器；B里面包括按键、键盘、指示灯和屏幕等人机交互设备，他们是用户界面的硬件部分，所以B是用户界面。           
42、数字图像的文件格式包括BMP，TIF（或TIEF），GIF，JPEG，PNG等，各有特点，适合不同的应用需求。gif是目前互联网上广泛使用的一种图像文件格式，它的颜色数目较少（不超过256色），文件特别小，适合互联网传输。jpeg是静止图像数据压缩编码的国际标准，它特别适合处理各种连续色调的彩色或灰度图像，算法复杂度适中，软硬件实现皆可，目前已在互联网和数码相机中得到广泛应用。         
43、无线局域网采用的协议主要是IEEE 802.11，通常也成为wifi。为了实现高带宽、高质量的WLAN，近些年推出的IEEE 802.11n协议又将传输速率进一步提高到108Mb/s甚至更高，相应的产品已经广泛使用。           
44、ARM处理器的7种异常主要包括：复位RESET、未定义指令UND、软件中断SWI、指令预取中止PABT、数据访问中止DABT、外部中断请求IRQ以及快速中断FIQ。          
45、Cortex-R为实时应用Cortex处理器，其中R表示Real Time；Cortex-M为面向控制应用的Cortex处理器，其中M表示MicroController。         
46、ARM通用寄存器共有31个，均为32位结构。R13~R14除了用户模式和系统模式分别为堆栈指针（SP）和程序链接寄存器（LR）之外，其他模式下均有自己独特的标记方式，是专门用于特定模式的寄存器，共6组12个。           
47、AND是逻辑与指令，按位相与，有0出0，全1出1；属于数据处理类之逻辑运算指令。将R1和R2进行与运算之后的结果送到R0中，R2中保持不变。           
48、MOV是数据传送指令，属于数据处理类之数据传送指令。将寄存器R3的值左移2位之后传送到R2；R3值不变。          
49、嵌入式系统的存储器类型即相应的英文缩写。全称为Random Access Memory(随机存取存储器)；全称为Read Only Memory（只读存储器）。          
50、I2C可用于连接嵌入式处理器及其外围器件，它是广泛采用的一种串行 半双工传输的总线标准。I2C总线中，发起数据传输操作的I2C器件是 主控器件。      
51、General Purpose Input Output，即通用输入/输出接口；该接口除了0态、1态还有高阻态。             
52、图（a）是共阳极接法；即把LED发光二极管的所有阳极连接在一起；图（b）是共阴极接法，即把所有LED发光管的阴极连接在一起。             
53、S3C2410内部的电源管理模块所具有的四种模式：正常模式、慢速模式、休眠模式和掉电模式。休眠模式下，电源管理模块仅断开ARM内核时钟FCLK，让CPU处于休眠状态，但仍为外围硬件组件提供时钟；掉电模式下电源管理模块将断开内部电源，除非唤醒逻辑有效，否则内核不产生功耗。          
54、实时系统的按响应时间分类，一般分为三类：强实时系统、普通实时系统和弱实时系统。强实时系统的响应时间在毫秒级或微秒级；弱实时系统的响应时间一般在数十秒。          
55、μC/OS-II系统内核所提供的5个基本功能：任务管理、任务间通信与同步、任务调度、时间管理和内存管理。             
56、嵌入式系统加电后执行的第一批最初操作称为引导或者自举，对应的程序称为引导程序或者引导加载程序。            
57、μC/OS-II的就绪任务等级在就绪表中，OSRdyTbl［］是就绪表的位图映像矩阵，每一位代表了一个优先级任务的就绪状态，称为就绪位，该矩阵最多可有64位。           
58、嵌入式Linux进程间的通信机制。包括信号、管道、消息队列、信号量、共享内存和套接字。          
59、嵌入式系统主要开发工具软件ADS1.2如何进行地址映射配置。ADS1.2把目标文件中的信息按照3种存储区域类型来进行划分，即划分为RO段、RW段、ZI段；RO段是指代码存储区和常数存储区，具有只读性质。          
60、GCC是GNU开发工具套件中的核心工具软件，是编译器；GDB是GNU开发工具套件中的程序调试工具。           
## 综合体

61、某食堂的售饭系统由一个后台数据库系统及若干个前台刷卡机组成，其基本功能具体描述如下：           
a、刷卡机的硬件组成中，除了必须的最小硬件系统外，还需要IC卡读写模块、8段LED组成的显示模块、键盘模块、蜂鸣器模块、RS-485通信模块等。          
b、客户需要事先办理本系统的消费IC卡，预存若干金额，办卡信息及预存金额存储在后台数据库系统中。          
c、客户消费时，用IC卡在刷卡机上支付。支付时，由售饭员在刷卡机上输入客户缴费金额且在LED显示器上显示，然后客户刷卡，若IC卡合法，则把缴费金额和IC卡信息传输给后台数据库系统。若IC卡不合法，用蜂鸣器发不合法提示音。           
d、后台数据库系统接收到刷卡机的信息后，将根据IC卡号查询出该卡的余额，若余额大于等于应缴费额，则进行扣费，再把当前余额及扣费正确信息回传给刷卡机。若余额小于应缴费额，则回传扣费不正确信息给刷卡机。            
e、刷卡机接收到回传的信息后，显示回传的余额，且若是扣费正确信息，则用蜂鸣器发"扣费正确"提示音；若是扣费不正确信息，则用蜂鸣器发"扣费不正确"提示音。                 
 
根据上述功能要求的描述，若采用S3C2410芯片为核心来构建刷卡机的硬件平台，请完善下面的叙述（程序）和回答有关的问题。                
（1）在设计硬件时，最小的硬件系统是保证系统能正常工作的必要硬件组成。它包括电源电路、【81】时钟电路、复位电路、调试测试接口、以及 【82】 存储器。          
   
（2）若在硬件设计时，选用8个共阴极的8段LED（其排列如图1所示）组成2组显示器（1组4个8段LED），用于显示当前消费金额和余额。           
     若采用GPC0~GPC6、GPC7外接同向驱动后，分别连接到显示"消费金额"的LED显示器段信号线a~f、dp上，采用GPD0~GPD3外接同向驱动后分别控制该组显示器中低数据位~高数据位的4个8段LED位信号线。                
     另外采用GPC8~GPC14、GPC15外接同向驱动后，分别连接到显示"余额"的LED显示器段信号线a~f、dp上，采用GPD4~GPD7外接同向驱动后分别控制该组显示器中低数据位~高数据位的4个8段LED位信号线。              

    那么，GPC0~GPC15引脚的功能为：【83】输出 ，GPD0~GPD7引脚的功能为： 【84】输出 。初始化GPC0~GPC15引脚功能的语句可以是：             
           //rGPCCON是端口C的控制寄存器，其格式见后面附录             
           rGPCCON =  【85】0x55555555;           
初始化GPD0~GPD7引脚功能的语句可以是            
           //rGPDCON是端口D的控制寄存器，其格式见后面附录           
           rGPDCON=((rGPDCON|0x00005555)&【86】0xFFFF5555);              
    若只在"余额"LED显示器中的次高数据位LED上显示字符"3"，相关驱动程序中可用下面语句实现。           
          rGPCDAT =     【87】0x4F00;//输出"3"的段信号                    
          rGPDDAT =     【88】0xFFBF;//输出次高数据位被点亮的控制信号                 
 
（3）刷卡机上输入客户缴费金额的键盘，在设计时采用非标准键盘组成，键盘接口设计成4×4的阵列（其按键排列示意图如图2所示）。键盘接口电路中选用GPE0~GPE3来输出键盘行扫描信号，选用GPE4~GPE7来输入键盘列信号。软件设计时设计者自行设计了键盘扫描函数，请你补充完善之：              

 //*KEYOUTPUT是键盘扫描时的输出地址，KEYINPUT是键盘读入时的地址             
        #define  KEYOUTPUT   (*(volatile INT8U *)0x56000044)             
        #define  KEYINPUT     (*(volatile INT8U *)0x56000044)               
        INT16U ScanKey()               
        {                
            INT16U key=0xFFFF;                    
            INT16U i;             
            INT8U temp=0xFF,output;               
            //rGPECON是端口E的控制寄存器，其格式见后面附录                         
            rGPECON= ((rGPECON &0xFFFFFF00) |     【89】0x00000055 ); //初始化           GPE0~GPE3为输出            
            rGPECON= rGPECON &   【90】 0xFFFF00FF  ; //初始化GPE4~GPE7为输入      
           //下面判断键盘中是否有键按下                 
           for (i=1;(( i<= 8)&&(i>0));  【91】 i<<=1       )                       
           {                 
              output |= 0xFF;                   
              output &= (~i);           
              KEYOUTPUT=output;              
              temp = KEYINPUT;                
              if ((temp&0xF0)!= 【92】0xF0 )//判断列信号是否为全"1"             
              {              
                  key = (~i);                
                  key <<= 8;                                 
                  key |= ((temp&0xF0)|0x0F); //求得按键的返回值                   
                  return (key);             //函数返回按键对应的值               
               }            
            }           
            return 0xFFFF;            
        }                                 
应用程序中可根据上面的键盘扫描函数的返回值，来判断是否有按键按下，并确定是哪个按键按下。例如：若返回值为： 【93】0xFDBF时，可知是键盘中的"6"键按下，               
若返回值为： 【94】0xFE7F时，可知是键盘中的"确认"键被按下。若无键按下时，返回值应为：【95】0xFFFF。                              
 
（4）刷卡机与后台数据库系统通信采用RS-485总线。因此在硬件设计时，需要采用S3C2410芯片内部的 【96】UART部件外加电平转换芯片等来实现。若在软件设计时，其初始化程序中波特率设置为9600bps，数据格式设置为：8位数据位、无校验、1位停止位。那么，1秒时间内最多能传输 【97】960 字节的信息。                   
 
（5）刷卡机上的应用软件是在无操作系统环境下开发的。设计者可以自行设计系统的启动引导程序，在该程序中完成异常向量设置、堆栈指针设置以及必要的硬件初始化。ARM9体系结构中规定的复位异常所对应的异常向量地址为【98】0x00000000。系统上电/复位后，将从该地址处开始执行程序，因为ARM9体系结构中规定的各异常向量地址之间间隔通常为 【99】4个字节。因此，复位异常向量地址处通常存储一条 【100】分支 指令的代码。                 
